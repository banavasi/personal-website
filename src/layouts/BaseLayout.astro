---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ThreeBackground from '../components/ThreeBackground.astro';
import CustomCursor from '../components/CustomCursor.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

interface Props {
	title?: string;
	description?: string;
}

const { title = SITE_TITLE, description = SITE_DESCRIPTION } = Astro.props;
---

<!doctype html>
<html lang="en" class="dark">
	<head>
		<BaseHead title={title} description={description} />
	</head>
	<body class="bg-background text-foreground antialiased overflow-x-hidden cursor-none m-0 p-0">
        <!-- <ThreeBackground /> -->
        <CustomCursor />
		<Header />
		<main class="w-full relative z-10 m-0 p-0">
			<slot />
		</main>
		<Footer />

        <script>
            import Lenis from 'lenis';
            import gsap from 'gsap';
            import { ScrollTrigger } from 'gsap/ScrollTrigger';

            gsap.registerPlugin(ScrollTrigger);

            // Initialize Lenis for smooth scrolling
            const lenis = new Lenis({
                duration: 1.2,
                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                orientation: 'vertical',
                gestureOrientation: 'vertical',
                smoothWheel: true,
            });

            function raf(time: number) {
                lenis.raf(time);
                requestAnimationFrame(raf);
            }

            requestAnimationFrame(raf);

            // Connect Lenis to ScrollTrigger
            lenis.on('scroll', ScrollTrigger.update);

            gsap.ticker.add((time) => {
                lenis.raf(time * 1000);
            });

            gsap.ticker.lagSmoothing(0);
        </script>
	</body>
</html>
