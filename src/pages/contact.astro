---
import MainLayout from '@/layouts/main.astro';
import { NeoButton } from '@/components/NeoButton';
import { NeoCard } from '@/components/NeoCard';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Mail, Linkedin, Github, MapPin, Send } from 'lucide-react';
import { getContactPageContent } from '@/lib/cms/content-service';

// Fetch content from CMS with fallback to static
const contactPageContent = await getContactPageContent();

const content = {
  title: 'Contact Shashank Shandilya | Available for Senior Technical Leadership Roles',
  description:
    'Get in touch for technical leadership opportunities, consulting, or collaboration. Based in Scottsdale, Arizona. Available for full-time roles, contract work, and technical consulting in cloud architecture, AI automation, and team leadership.',
};

// Icon mapping for dynamic icons
const iconMap: Record<string, any> = { Mail, Linkedin, Github };
---

<MainLayout content={content}>
  <div class="container mx-auto px-4 py-8 sm:py-12">
    <div class="grid grid-cols-1 gap-8 sm:gap-12 lg:gap-16 lg:grid-cols-2">
      <!-- Left Column: Info -->
      <div>
        <h1 class="font-display mb-6 sm:mb-8 text-4xl sm:text-5xl md:text-6xl lg:text-8xl leading-none font-bold">
          {contactPageContent.header.title.line1}
          <br />
          <span class="text-neon-green">{contactPageContent.header.title.line2}</span>
        </h1>
        <p class="mb-8 sm:mb-12 max-w-md font-mono text-base sm:text-lg md:text-xl">
          {contactPageContent.header.description}
        </p>

        <div class="space-y-4 sm:space-y-6 lg:space-y-8">
          {
            contactPageContent.contactInfo.map((contactItem) => {
              const IconComponent = iconMap[contactItem.icon];
              const accentColorClass =
                contactItem.accentColor === 'blue'
                  ? 'hover:text-electric-blue'
                  : contactItem.accentColor === 'green'
                    ? 'hover:text-neon-green'
                    : 'hover:text-gray-600';

              return (
                <NeoCard
                  className="flex items-center gap-3 sm:gap-4 md:gap-6"
                  hoverEffect={true}
                  accentColor={contactItem.accentColor}
                  client:load
                >
                  <div class="border-2 border-black bg-black p-3 sm:p-4 text-white shrink-0">
                    {IconComponent && <IconComponent className="w-5 h-5 sm:w-6 sm:h-6" />}
                  </div>
                  <div class="min-w-0">
                    <div class="font-mono text-xs font-bold text-gray-500 uppercase">
                      {contactItem.label}
                    </div>
                    <a
                      href={contactItem.href}
                      target={contactItem.href.startsWith('http') ? '_blank' : undefined}
                      rel={contactItem.href.startsWith('http') ? 'noopener noreferrer' : undefined}
                      class={`font-display text-base sm:text-lg md:text-xl font-bold ${accentColorClass} transition-colors break-all sm:break-normal`}
                    >
                      {contactItem.value}
                    </a>
                  </div>
                </NeoCard>
              );
            })
          }

          <div class="mt-8 sm:mt-12 flex items-center gap-3 sm:gap-4 font-mono text-sm sm:text-base">
            <MapPin className="text-neon-green h-4 w-4 sm:h-5 sm:w-5 shrink-0" />
            <span>{contactPageContent.location.text}</span>
          </div>
        </div>
      </div>

      <!-- Right Column: Form -->
      <div class="lg:pt-20">
        <NeoCard
          className="border-4 sm:border-6 lg:border-8 bg-white p-4 sm:p-8 md:p-12 dark:bg-black"
          accentColor="green"
          client:load
        >
          <h2 class="font-display mb-4 sm:mb-6 lg:mb-8 text-2xl sm:text-3xl font-bold">{contactPageContent.form.title}</h2>

          <form class="space-y-4 sm:space-y-6">
            <div class="grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2">
              <div class="space-y-1.5 sm:space-y-2">
                <label class="font-mono text-xs sm:text-sm font-bold uppercase"
                  >{contactPageContent.form.fields.name.label}</label
                >
                <Input
                  placeholder={contactPageContent.form.fields.name.placeholder}
                  className="focus-visible:border-neon-green h-12 sm:h-14 rounded-none border-2 sm:border-4 border-black bg-gray-50 font-mono text-sm sm:text-base focus-visible:ring-0"
                  client:load
                />
              </div>
              <div class="space-y-1.5 sm:space-y-2">
                <label class="font-mono text-xs sm:text-sm font-bold uppercase"
                  >{contactPageContent.form.fields.email.label}</label
                >
                <Input
                  placeholder={contactPageContent.form.fields.email.placeholder}
                  type="email"
                  className="focus-visible:border-neon-green h-12 sm:h-14 rounded-none border-2 sm:border-4 border-black bg-gray-50 font-mono text-sm sm:text-base focus-visible:ring-0"
                  client:load
                />
              </div>
            </div>

            <div class="space-y-1.5 sm:space-y-2">
              <label class="font-mono text-xs sm:text-sm font-bold uppercase"
                >{contactPageContent.form.fields.subject.label}</label
              >
              <Input
                placeholder={contactPageContent.form.fields.subject.placeholder}
                className="focus-visible:border-neon-green h-12 sm:h-14 rounded-none border-2 sm:border-4 border-black bg-gray-50 font-mono text-sm sm:text-base focus-visible:ring-0"
                client:load
              />
            </div>

            <div class="space-y-1.5 sm:space-y-2">
              <label class="font-mono text-xs sm:text-sm font-bold uppercase"
                >{contactPageContent.form.fields.message.label}</label
              >
              <Textarea
                placeholder={contactPageContent.form.fields.message.placeholder}
                className="focus-visible:border-neon-green min-h-[150px] sm:min-h-[200px] resize-none rounded-none border-2 sm:border-4 border-black bg-gray-50 p-3 sm:p-4 font-mono text-sm sm:text-base focus-visible:ring-0"
                client:load
              />
            </div>

            <NeoButton className="group mt-2 sm:mt-4 h-12 sm:h-14 lg:h-16 w-full text-base sm:text-lg" client:load>
              {contactPageContent.form.submitButton.text}
              <Send
                className="ml-2 h-4 w-4 sm:h-5 sm:w-5 transition-transform group-hover:translate-x-1 group-hover:-translate-y-1"
              />
            </NeoButton>
          </form>
        </NeoCard>
      </div>
    </div>
  </div>
</MainLayout>
